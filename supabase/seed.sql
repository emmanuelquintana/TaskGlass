-- TaskGlass seed (MVP)
begin;

insert into tg_workspace(id, code, name, description)
values
  ('11111111-1111-1111-1111-111111111111', 'BANK', 'Banco', 'Trabajo del banco (sprints cada 2 semanas)'),
  ('22222222-2222-2222-2222-222222222222', 'OPS',  'Operaciones', 'Operación diaria + marketplaces + sitios + clientes')
on conflict (code) do update
set name = excluded.name,
    description = excluded.description;

with ws as (
  select id, code from tg_workspace where code in ('BANK','OPS')
)
insert into tg_column(workspace_id, key, title, sort_order)
select
  ws.id,
  c.key::tg_task_status,
  c.title,
  c.sort_order
from ws
cross join (values
  ('todo',        'Por iniciar',   1),
  ('in_progress', 'En progreso',   2),
  ('blocked',     'Detenida',      3),
  ('done',        'Completada',    4)
) as c(key, title, sort_order)
on conflict (workspace_id, key) do update
set title = excluded.title,
    sort_order = excluded.sort_order;

insert into tg_tag(id, workspace_id, group_key, name)
values
  ('20000000-0000-0000-0000-000000000001','22222222-2222-2222-2222-222222222222','platform','Liverpool'),
  ('20000000-0000-0000-0000-000000000002','22222222-2222-2222-2222-222222222222','platform','Mercado Libre'),
  ('20000000-0000-0000-0000-000000000003','22222222-2222-2222-2222-222222222222','platform','Amazon'),
  ('20000000-0000-0000-0000-000000000004','22222222-2222-2222-2222-222222222222','platform','Facebook'),
  ('20000000-0000-0000-0000-000000000005','22222222-2222-2222-2222-222222222222','platform','TikTok'),
  ('20000000-0000-0000-0000-000000000006','22222222-2222-2222-2222-222222222222','platform','Shein'),
  ('20000000-0000-0000-0000-000000000007','22222222-2222-2222-2222-222222222222','platform','Clientes'),
  ('20000000-0000-0000-0000-000000000101','22222222-2222-2222-2222-222222222222','brand','Alfa Romeo'),
  ('20000000-0000-0000-0000-000000000102','22222222-2222-2222-2222-222222222222','brand','U4U'),
  ('20000000-0000-0000-0000-000000000201','22222222-2222-2222-2222-222222222222','company','Marcas y Licencias'),
  ('20000000-0000-0000-0000-000000000202','22222222-2222-2222-2222-222222222222','company','Pure and Simple'),
  ('20000000-0000-0000-0000-000000000301','22222222-2222-2222-2222-222222222222','routine','Diario')
on conflict (id) do nothing;

insert into tg_recurrence_template(id, workspace_id, title, description, priority, cadence, is_active)
values
  ('30000000-0000-0000-0000-000000000001','22222222-2222-2222-2222-222222222222','Revisar facturas', null, 2, 'daily', true),
  ('30000000-0000-0000-0000-000000000002','22222222-2222-2222-2222-222222222222','Surtir pedidos TikTok (Marcas y Licencias)', null, 1, 'daily', true),
  ('30000000-0000-0000-0000-000000000003','22222222-2222-2222-2222-222222222222','Revisar pedidos Shein (Alfa + U4U)', null, 1, 'daily', true),
  ('30000000-0000-0000-0000-000000000004','22222222-2222-2222-2222-222222222222','Revisar pedidos Liverpool (solo Marcas)', null, 1, 'daily', true),
  ('30000000-0000-0000-0000-000000000005','22222222-2222-2222-2222-222222222222','Revisar pedidos Amazon (solo Marcas)', null, 1, 'daily', true),
  ('30000000-0000-0000-0000-000000000006','22222222-2222-2222-2222-222222222222','Revisar pedidos Mercado Libre (Alfa + U4U)', null, 1, 'daily', true),
  ('30000000-0000-0000-0000-000000000007','22222222-2222-2222-2222-222222222222','Contestar clientes (durante el día)', null, 2, 'daily', true)
on conflict (id) do update
set title = excluded.title,
    description = excluded.description,
    priority = excluded.priority,
    cadence = excluded.cadence,
    is_active = excluded.is_active;

insert into tg_recurrence_template_tag(template_id, tag_id)
values
  ('30000000-0000-0000-0000-000000000001','20000000-0000-0000-0000-000000000301'),

  ('30000000-0000-0000-0000-000000000002','20000000-0000-0000-0000-000000000005'),
  ('30000000-0000-0000-0000-000000000002','20000000-0000-0000-0000-000000000201'),
  ('30000000-0000-0000-0000-000000000002','20000000-0000-0000-0000-000000000301'),

  ('30000000-0000-0000-0000-000000000003','20000000-0000-0000-0000-000000000006'),
  ('30000000-0000-0000-0000-000000000003','20000000-0000-0000-0000-000000000101'),
  ('30000000-0000-0000-0000-000000000003','20000000-0000-0000-0000-000000000102'),
  ('30000000-0000-0000-0000-000000000003','20000000-0000-0000-0000-000000000301'),

  ('30000000-0000-0000-0000-000000000004','20000000-0000-0000-0000-000000000001'),
  ('30000000-0000-0000-0000-000000000004','20000000-0000-0000-0000-000000000201'),
  ('30000000-0000-0000-0000-000000000004','20000000-0000-0000-0000-000000000301'),

  ('30000000-0000-0000-0000-000000000005','20000000-0000-0000-0000-000000000003'),
  ('30000000-0000-0000-0000-000000000005','20000000-0000-0000-0000-000000000201'),
  ('30000000-0000-0000-0000-000000000005','20000000-0000-0000-0000-000000000301'),

  ('30000000-0000-0000-0000-000000000006','20000000-0000-0000-0000-000000000002'),
  ('30000000-0000-0000-0000-000000000006','20000000-0000-0000-0000-000000000101'),
  ('30000000-0000-0000-0000-000000000006','20000000-0000-0000-0000-000000000102'),
  ('30000000-0000-0000-0000-000000000006','20000000-0000-0000-0000-000000000301'),

  ('30000000-0000-0000-0000-000000000007','20000000-0000-0000-0000-000000000007'),
  ('30000000-0000-0000-0000-000000000007','20000000-0000-0000-0000-000000000301')
on conflict do nothing;

commit;
